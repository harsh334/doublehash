<div class="form-bg">
    <div class="container">
        <div class="row">
            <div class="register-form">
                <div class="form-container">
                    <form
                        class="form"
                        [formGroup]="registerForm"
                        (ngSubmit)="submitRegisterForm(registerForm.value)"
                    >
                        <h3 class="title">Registeration Form</h3>
                        <div class="mb-3" *ngIf="!showImageUploadOption">
                            <div class="form-group">
                                <span class="input-icon">
                                    <i class="fa fa-user"> </i>
                                </span>
                                <input
                                    class="form-control"
                                    formControlName="userEmail"
                                    type="email"
                                    (change)="onEmailEntered($event)"
                                    placeholder="UserEmail"
                                />
                            </div>
                            <div
                                class="text-danger"
                                *ngIf="
                                    userEmail &&
                                    userEmail.invalid &&
                                    (userEmail.dirty || userEmail.touched)
                                "
                            >
                                <span *ngIf="userEmail.errors?.['required']">
                                    Email is required.
                                </span>
                                <span *ngIf="userEmail.errors?.['email']">
                                    Invalid email address.
                                </span>
                            </div>
                            <div class="form-group">
                                <span class="input-icon">
                                    <i class="fa fa-user"> </i>
                                </span>
                                <input
                                    class="form-control"
                                    formControlName="fullName"
                                    type="text"
                                    placeholder="FullName"
                                />
                            </div>
                            <div
                                class="text-danger"
                                *ngIf="
                                    fullName &&
                                    fullName.invalid &&
                                    (fullName.dirty || fullName.touched)
                                "
                            >
                                <span *ngIf="fullName.errors?.['required']">
                                    full name is required.
                                </span>

                                <span
                                    *ngIf="fullName.invalid && !fullName.errors?.['required']"
                                >
                                    Length of name should be in range 2 to 30.
                                </span>
                            </div>
                            <div class="form-group">
                                <span class="input-icon">
                                    <i class="fa fa-user"> </i>
                                </span>
                                <input
                                    class="form-control"
                                    id="password"
                                    formControlName="userName"
                                    type="text"
                                    value="{{ uniqueName }}"
                                    placeholder="UserName"
                                    title="this field is readonly and can not be edited"
                                    readonly
                                />
                            </div>
                            <div class="form-group">
                                <span class="input-icon">
                                    <i class="fa fa-lock"></i>
                                </span>
                                <input
                                    class="form-control"
                                    formControlName="password"
                                    type="password"
                                    placeholder="Password"
                                />
                            </div>
                            <div
                                class="text-danger"
                                *ngIf="
                                    password &&
                                    password.invalid &&
                                    (password.dirty || password.touched)
                                "
                            >
                                <span *ngIf="password.errors?.['required']">
                                    password is required.
                                </span>

                                <span *ngIf="password.errors?.['pattern']">
                                    Password must contain atleast a number,
                                    special character & camel case letter.
                                </span>

                                <span
                                    *ngIf="password.errors?.['minlength'] && !password.errors?.['pattern']"
                                >
                                    Password should be atleast 8 letters long.
                                </span>
                            </div>

                            <input
                                class="form-control"
                                formControlName="posts"
                                hidden
                                type="text"
                                value=""
                            />
                        </div>
                        <div class="form-group" *ngIf="showImageUploadOption">
                            <span class="input-icon">
                                <i class="fa fa-lock"></i>
                            </span>
                            <input
                                class="form-control"
                                id="profileImage"
                                formControlName="profileImage"
                                type="file"
                                (change)="onImageSelected($event)"
                            />
                        </div>
                        <div
                            class="text-danger"
                            *ngIf="
                                profileImage &&
                                profileImage.invalid &&
                                (profileImage.dirty || profileImage.touched)
                            "
                        >
                            <span *ngIf="profileImage.invalid">
                                Invalid file selected for an image.
                            </span>
                        </div>
                        <div
                            class="d-flex justify-content-between"
                            *ngIf="showImageUploadOption"
                        >
                            <div class="submit">
                                <button
                                    [disabled]="registerForm.invalid"
                                    class="btn"
                                    type="submit"
                                >
                                    Submit Form
                                </button>
                            </div>
                            <div class="login">
                                <button
                                    class="btn"
                                    (click)="redirectToLoginPage()"
                                >
                                    Go to Login
                                </button>
                            </div>
                        </div>
                        <button
                            class="navigation-button"
                            id="prevBtn"
                            (click)="showImageUploadForm()"
                            [disabled]="!showImageUploadOption"
                        >
                            <i class="fa fa-long-arrow-left" aria-hidden="true">
                            </i>
                        </button>
                        <button
                            class="navigation-button"
                            id="nextBtn"
                            (click)="showImageUploadForm()"
                            [disabled]="showImageUploadOption"
                        >
                            <i
                                class="fa fa-long-arrow-right"
                                aria-hidden="true"
                            >
                            </i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
